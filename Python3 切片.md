# Python3 切片

```python
a = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
print(a[-1:]==a[-1])
```

这个输出的是True or False?

```python
False
```

因为a[-1:] = [9]；而a[-1] = 9。

## 一、Python可切片对象的索引方式

包括：正索引和负索引两部分，如下图所示，以list对象a = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]为例：

​                              -------->从左往右                                                                                           从右往左  <--------

| 正索引 | 0    | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    |
| ------ | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 负索引 | -10  | -9   | -8   | -7   | -6   | -5   | -4   | -3   | -2   | -1   |
| 值     | 0    | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    |
|        | 起点 |      |      |      |      |      |      |      |      | 终点 |

## 二、Python切片操作的一般方式

一个完整的切片表达式包含两个“:”，用于分隔三个参数(start_index、end_index、step)，**当只有一个“:”时，默认第三个参数step=1。**

`切片操作基本表达式：object[start_index: end_index: step]`

参数解释：

start_index：表示起始索引（包含该索引对应值）；该参数省略时，表示从对象“端点”开始取值，至于是从“起点”还是从“终点”开始，则由step参数的正负决定，step为正从“起点”开始，为负从“终点”开始。

end_index：表示终止索引（不包含该索引对应值）；该参数省略时，表示一直取到数据“端点”，至于是到“起点”还是到“终点”，同样由step参数的正负决定，step为正时直到“终点”，为负时直到“起点”。

step：正负数均可，其绝对值大小决定了切取数据时的“步长”，而**正负号决定了“切取方向”，正表示“从左往右”取值，负表示“从右往左”取值**。**当step省略时，默认为1，即从左往右以步长1取值。**

## 三、 Python切片操作详细例子

以下示例均以list对象a = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]为例：

```python
a = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
```

1. 切取单个值

   ```python
   a[0]  # 0
   a[-4]  # 6
   ```

2. 切取完整对象

   ```python
   a[:]  # 从左往右  [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
   a[::]  # 从左往右  [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
   a[::-1]  # 从右往左  [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]
   ```

3. start_index和end_index全为正(+)索引的情况

   ```python
   a[1: 6]  # step=1,从左往右取值，start_index=1到end_index=6同样表示从左往右取值。  [1, 2, 3, 4, 5]
   ```

   ```python
   a[1: 6: -1]  # [] 输出为空列表，说明没取到数据。
   # step = -1，决定了从右往左取值，而start_index=1到end_index=6决定了从左往右取值，两者矛盾，所以为空。
   ```

   ```python
   a[6: 2]  # [] 同样输出为空列表。
   # step=1，决定了从左往右取值，而start_index=6到end_index=2决定了从右往左取值，两者矛盾，所以为空。
   ```

   ```python
   a[: 6]  # [0, 1, 2, 3, 4, 5]
   # step=1，表示从左往右取值，而start_index省略时，表示从端点开始，因此这里的端点是“起点”，即从“起点”值0开始一直取到end_index=6(该点不包括)。
   ```

   ```python
   a[: 6: -1]  # [9, 8, 7]
   # step=-1，从右往左取值，而start_index省略时，表示从端点开始，因此这里的端点是“终点”，即从“终点”值9开始一直取到end_index=6(该点不包括)。
   ```

   ```python
   a[6:]  # [6, 7, 8, 9]
   # step=1，从左往右取值，从start_index=6开始，一直取到“终点”值9。
   
   ```

   ```python
   a[6:: -1]  # [6, 5, 4, 3, 2, 1, 0]
   # step=-1，从右往左取值，从start_index=6开始，一直取到“起点”0。
   ```

4. start_index和end_index全为负(-)索引的情况

   ```python
   a[-1: -6]  # []  step=1，从左往右取值，而start_index=-1到end_index=-6决定了从右往左取值，两者矛盾，所以为空。
   # 索引-1在-6的右边(如上图)
   ```

   ```python
   a[-1: -6: -1]  # [9, 8, 7, 6, 5]
   # step=-1，从右往左取值，start_index=-1到end_index=-6同样是从右往左取值。
   # 索引-1在-6的右边(如上图)
   ```

   ```python
   a[-6: -1]  # [4, 5, 6, 7, 8]
   # step=1，从左往右取值，而start_index=-6到end_index=-1同样是从左往右取值。
   # 索引-6在-1的左边(如上图)
   ```

   ```python
   a[: -6]  # [0, 1, 2, 3]
   # step=1，从左往右取值，从“起点”开始一直取到end_index=-6(该点不包括)。
   ```

   ```python
   a[: -6: -1]  # [9, 8, 7, 6, 5]
   # step=-1，从右往左取值，从“终点”开始一直取到end_index=-6(该点不包括)。
   ```

   ```python
   a[-6:]  # [4, 5, 6, 7, 8, 9]
   # step=1，从左往右取值，从start_index=-6开始，一直取到“终点”。
   ```

   ```python
   a[-6:: -1]  # [4, 3, 2, 1, 0]
   # step=-1，从右往左取值，从start_index=-6开始，一直取到“起点”。
   ```

   

5. start_index和end_index正(+)负(-)混合索引的情况

   ```python
   a[1: -6]  # [1, 2, 3]
   # start_index=1在end_index=-6的左边，因此从左往右取值，而step=1同样决定了从左往右取值，因此结果正确
   ```

   ```python
   a[1: -6: -1]  # []
   # start_index=1在end_index=-6的左边，因此从左往右取值，但step=-1则决定了从右往左取值，两者矛盾，因此为空。
   ```

   ```python
   a[-1: 6]  # []
   # start_index=-1在end_index=6的右边，因此从右往左取值，但step=1则决定了从左往右取值，两者矛盾，因此为空。
   ```

   ```python
   a[-1: 6: -1]  # [9, 8, 7]
   # start_index=-1在end_index=6的右边，因此从右往左取值，而step=-1同样决定了从右往左取值，因此结果正确。
   ```

6. 多层切片操作

   ```python
   a[: 8][2: 5][-1: ]
   
   # 相当于：
   # a = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
   # a[: 8] = [0, 1, 2, 3, 4, 5, 6, 7]
   # a[: 8][2: 5] = [2, 3, 4]
   # a[: 8][2: 5][-1: ] = [4]
   ```

   理论上可无限次多层切片操作，只要上一次返回的是非空可切片对象即可。

7. 切片操作的三个参数可以用表达式

   ```python
   a[2+1: 3*2: 7%3]
   # [3, 4, 5]
   # 即：a[2+1: 3*2: 7%3] = a[3: 6: 1]
   ```

8. 其他对象的切片操作

   前面的切片操作说明都以list为例进行说明，但实际上可进行的切片操作的数据类型还有很多，包括元组、字符串等等。

   ```python
   (0, 1, 2, 3, 4, 5)[: 3]
   # (0, 1, 2)
   # 元组的切片操作
   ```

   ```python
   'ABCDEFG'[:: 2]
   # 'ACEG'
   # 字符串的切片操作
   ```

   ```python
   for i in range(1, 100)[2: : 3][-10: ]:
       '''就是利用range函数生成1-99的整数，然后取3的倍数，再取最后十个。'''
       print(i)
   
   ```

## 四、常用切片操作

以列表：a = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]为说明对象

1. 取偶数位置

   ```python
   b = a[:: 2]  # [0, 2, 4, 6, 8]
   ```

2. 取奇数位置

   ```python
   b = a[1: : 2]  # [1, 3, 5, 7, 9]
   ```

3. 拷贝整个对象

   ```python
   b = a[:]  
   print(b)  # [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
   print(id(a))  # 11713768
   print(id(b))  # 14793352
   或
   b = a.copy()
   print(b)  # [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
   print(id(a))  # 15514856
   print(id(b))  # 45660776
   ```

   **需要注意的是：[:]和.copy()都属于“浅拷贝”，只拷贝最外层元素，内层嵌套元素则通过引用，而不是独立分配内存。**

   ```python
   a = [1, 2, ['A', 'B']]  # 原始a
   print('a = {}'.format(a))  # a = [1, 2, ['A', 'B']]
   b = a[:]  # [1, 2, ['A', 'B']]
b[0] = 9  # 修改b的最外层元素，将1变成9
   b[2][0] = 'D'  # 修改b的内嵌层元素
   print('a={}'.format(a))  # a=[1, 2, ['D', 'B']]  b修改内部元素A为D后，a中的A也变成了D，说明共享内部嵌套元素，但外部元素1没变。
   print('b={}'.format(b))  # b=[9, 2, ['D', 'B']]  修改后的b
   print('id(a)={}'.format(id(a)))  # id(a)=49461864
   print('id(b)={}'.fromat(id(b)))  # id(b)=52017576
   
   ```
   
4. 修改单个元素

   ```python
   
   ```

   www.baidu.com









